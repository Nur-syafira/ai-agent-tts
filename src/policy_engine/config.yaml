# ======================================
# Policy Engine Configuration
# ======================================

# LLM для парсинга и генерации
llm:
  base_url: "http://localhost:8000/v1"
  model_name: "models/Qwen3-16B-A3B-abliterated-AWQ"  # Локальный путь к модели
  temperature: 0.7
  max_tokens: 256
  # Для structured output (слоты)
  structured_temperature: 0.3
  structured_max_tokens: 512
  # Память диалога
  max_history_turns: 10  # Передавать последние 10 реплик (5 user + 5 assistant) в LLM

# Сервисы
services:
  asr_url: "http://localhost:8001"
  tts_url: "http://localhost:8002"
  
# FSM параметры
fsm:
  # Таймаут на ответ клиента (секунды)
  user_response_timeout: 30
  # Максимум попыток переспроса
  max_retries: 3
  # Включить валидацию слотов через LLM
  validate_slots: true

# Notifier (Google Sheets)
notifier:
  enabled: true
  async_write: true  # Не блокировать диалог
  credentials_path: "credentials/google_credentials.json"
  spreadsheet_id: "YOUR_GOOGLE_SHEET_ID"  # Замените на ID вашей таблицы
  worksheet_name: "Лист4"

# Server
server:
  host: "0.0.0.0"
  port: 8003

# Redis для хранения состояния сессий
state_storage:
  redis_url: "redis://localhost:6379"
  session_ttl: 1800  # 30 минут

# Промпты (опционально, можно переопределить)
prompts:
  # System prompt для агента (можно кастомизировать под свой домен)
  system_prompt: |
    Ты — профессиональный администратор, который принимает звонки и обрабатывает запросы клиентов.
    
    Твоя задача:
    - Вежливо и дружелюбно общаться с клиентами
    - Собирать необходимую информацию
    - Предлагать услуги когда это уместно
    - Проявлять эмпатию и поддерживать клиента
    - Говорить короткими, понятными фразами
    
    Стиль общения:
    - Используй имя клиента после того как узнаешь его
    - Поддерживающий тон: "понимаю вас", "поможем разобраться"
    - Никаких длинных монологов — только суть
    - Если клиент прерывает тебя, адаптируйся и продолжай
    
    Правила:
    - НЕ придумывай информацию (цены, даты), которой нет в контексте
    - Если что-то непонятно — переспроси
    - Валидируй критичные данные (телефон, имя, дату/время)
  
  # Роль агента (для генерации ответов)
  agent_role: "администратор"  # Можно изменить на "консультант", "помощник" и т.д.

